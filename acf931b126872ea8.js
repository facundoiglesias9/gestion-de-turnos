(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42631,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(32341),l=e.i(7471);function a(){let{user:e,loading:a}=(0,s.useAuth)(),[i,o]=(0,r.useState)([]),[n,c]=(0,r.useState)(!0),[d,x]=(0,r.useState)(!1),[u,p]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[b,g]=(0,r.useState)(null),[v,f]=(0,r.useState)(null),w=(0,r.useRef)(null);(0,r.useEffect)(()=>{e&&j()},[e]),(0,r.useEffect)(()=>{let e=e=>{w.current&&!w.current.contains(e.target)&&f(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let j=async()=>{if(!e)return;c(!0);let{data:t,error:r}=await l.supabase.from("prices").select("*").eq("user_id",e.id).order("service_name",{ascending:!0});r?console.error("Error loading prices:",r):t&&o(t),c(!1)},N=async t=>{if(t.preventDefault(),e&&u&&m)if(b){let{error:e}=await l.supabase.from("prices").update({service_name:u.trim(),price:parseFloat(m)}).eq("id",b);e?(console.error("Error updating price:",e),alert("Error al actualizar el servicio")):(k(),j())}else{let{error:t}=await l.supabase.from("prices").insert({user_id:e.id,service_name:u.trim(),price:parseFloat(m)});t?(console.error("Error adding price:",t),alert("Error al agregar el servicio")):(k(),j())}},y=async e=>{if(!window.confirm("¿Estás seguro de eliminar este servicio?"))return;let{error:t}=await l.supabase.from("prices").delete().eq("id",e);t?(console.error("Error deleting price:",t),alert("Error al eliminar el servicio")):j(),f(null)},k=()=>{x(!1),p(""),h(""),g(null)};return a||!e?null:(0,t.jsxs)("div",{className:"space-y-6 pb-20",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Lista de Precios"}),(0,t.jsx)("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-bold shadow-lg shadow-purple-900/20",children:"+ Agregar Servicio"})]}),n?(0,t.jsx)("p",{className:"text-slate-400 text-center text-lg",children:"Cargando..."}):0===i.length?(0,t.jsx)("div",{className:"text-center py-12 glass-card rounded-xl",children:(0,t.jsx)("p",{className:"text-slate-300 text-lg",children:"No hay servicios en la lista"})}):(0,t.jsx)("div",{className:"glass-card rounded-xl overflow-visible border border-slate-700/50",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-slate-800/50 border-b border-slate-700",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-4 text-left text-base font-bold text-slate-200",children:"Servicio"}),(0,t.jsx)("th",{className:"px-4 py-4 text-right text-base font-bold text-slate-200",children:"Precio"}),(0,t.jsx)("th",{className:"px-2 py-4 w-10"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:i.map(e=>{let r;return(0,t.jsxs)("tr",{className:"hover:bg-slate-800/30 transition-colors relative",children:[(0,t.jsx)("td",{className:"px-4 py-4 text-white font-medium text-lg",children:e.service_name}),(0,t.jsx)("td",{className:"px-4 py-4 text-right font-bold text-green-400 text-lg",children:(r=e.price,`$${r.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})}`)}),(0,t.jsxs)("td",{className:"px-2 py-4 text-center relative",children:[(0,t.jsx)("button",{onClick:t=>{var r;return r=e.id,void(t.stopPropagation(),f(v===r?null:r))},className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-full transition-colors",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})})}),v===e.id&&(0,t.jsxs)("div",{ref:w,className:"absolute right-8 top-8 z-50 w-36 bg-slate-800 border border-slate-600 rounded-xl shadow-xl overflow-hidden",children:[(0,t.jsxs)("button",{onClick:()=>{g(e.id),p(e.service_name),h(e.price.toString()),x(!0),f(null)},className:"w-full text-left px-4 py-3 text-sm text-slate-200 hover:bg-slate-700 hover:text-white flex items-center gap-2",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),"Editar"]}),(0,t.jsxs)("button",{onClick:()=>y(e.id),className:"w-full text-left px-4 py-3 text-sm text-red-400 hover:bg-red-900/20 hover:text-red-300 flex items-center gap-2 border-t border-slate-700",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),"Eliminar"]})]})]})]},e.id)})})]})}),d&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"glass-card bg-slate-900 border border-slate-700 rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-white mb-6 text-center",children:b?"Editar Servicio":"Agregar Servicio"}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-base font-semibold text-slate-300 mb-2",children:"Nombre del Servicio"}),(0,t.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg",placeholder:"Ej: Manicura",required:!0,autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-base font-semibold text-slate-300 mb-2",children:"Precio"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg font-bold",placeholder:"0.00",required:!0})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:k,className:"flex-1 px-4 py-3 border border-slate-600 text-slate-300 rounded-xl hover:bg-slate-800 transition-colors font-medium text-lg",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",className:"flex-1 px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl transition-colors font-bold text-lg shadow-lg shadow-purple-900/20",children:b?"Actualizar":"Agregar"})]})]})]})})]})}e.s(["default",()=>a])}]);