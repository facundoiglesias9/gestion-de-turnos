(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37899,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(32341),a=e.i(7471),i=e.i(82568);function n(){let{loading:e}=(0,r.useAuth)(),[n,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[x,p]=(0,s.useState)(""),[b,f]=(0,s.useState)(!1),[g,w]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[y,N]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{let{data:{user:e}}=await a.supabase.auth.getUser();e&&!e.user_metadata?.business_name&&j(!0)})()},[]);let z=async()=>{try{let e="android"===i.Capacitor.getPlatform()?"com.facundo.turnos://login-callback":window.location.origin+"/auth/callback",{error:t}=await a.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:e,queryParams:{access_type:"offline",prompt:"consent"}}});if(t)throw t}catch(e){p(e.message)}},C=async()=>{if(y.trim()){f(!0);try{let{error:e}=await a.supabase.auth.updateUser({data:{business_name:y.trim()}});if(e)throw e;j(!1),window.location.reload()}catch(e){p(e.message)}finally{f(!1)}}},k=async e=>{e.preventDefault(),p(""),f(!0);let t=o.trim().toLowerCase(),s=d.trim(),r=m.trim();if(!t||!s){p("Por favor completa todos los campos"),f(!1);return}let i=`${t}@gestionturnos.com`;try{if(n){if(!r){p("El nombre del emprendimiento es obligatorio"),f(!1);return}let{data:e,error:t}=await a.supabase.auth.signUp({email:i,password:s,options:{data:{business_name:r}}});if(t){if(t.message.includes("already registered")||t.message.includes("User already registered")){p("El usuario ya existe. Intenta iniciar sesión."),f(!1);return}throw t}if(e.user&&!e.session){p("Registro exitoso. Por favor revisa tu email para confirmar la cuenta."),f(!1);return}}else{let{error:e}=await a.supabase.auth.signInWithPassword({email:i,password:s});if(e)if(e.message.includes("Invalid login credentials")){let e=`${t}@example.com`,{error:r}=await a.supabase.auth.signInWithPassword({email:e,password:s});if(r)if(r.message.includes("Invalid login credentials"))p("Usuario o contraseña incorrectos.");else throw r}else throw e}}catch(e){p(e.message||"Ocurrió un error. Intenta nuevamente.")}finally{f(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-zinc-950 font-sans",children:[(0,t.jsxs)("div",{className:"w-full max-w-sm p-6",children:[(0,t.jsxs)("div",{className:"text-center mb-8 relative z-10",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-2 tracking-tight",style:{fontFamily:"'Outfit', sans-serif",color:"#ffffff",textShadow:"0 0 20px rgba(255, 255, 255, 0.3)"},children:n?"Crear Cuenta":"Bienvenido/a"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:n?"Configura tu espacio":"Ingresa a tu gestor de turnos"})]}),(0,t.jsxs)("form",{onSubmit:k,className:"space-y-6 relative z-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2 ml-1",children:"Usuario"}),(0,t.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-zinc-900 border border-zinc-800 text-white placeholder-zinc-600 focus:outline-none focus:ring-2 focus:ring-white/20 focus:border-transparent transition-all",placeholder:"usuario"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2 ml-1",children:"Contraseña"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:g?"text":"password",value:d,onChange:e=>u(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-zinc-900 border border-zinc-800 text-white placeholder-zinc-600 focus:outline-none focus:ring-2 focus:ring-white/20 focus:border-transparent transition-all",placeholder:"••••••••"}),(0,t.jsx)("button",{type:"button",onClick:()=>w(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:g?(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}):(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),n&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2 ml-1",children:"Nombre"}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-zinc-900 border border-zinc-800 text-white placeholder-zinc-600 focus:outline-none focus:ring-2 focus:ring-white/20 focus:border-transparent transition-all",placeholder:"Ej: Test"})]}),x&&(0,t.jsx)("div",{className:"text-red-300 text-sm text-center bg-red-500/10 py-2 rounded-lg border border-red-500/20 backdrop-blur-sm",children:x}),(0,t.jsx)("button",{type:"submit",disabled:b,className:"w-full py-3 px-4 bg-white hover:bg-zinc-200 text-black font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Cargando...":n?"Registrarse":"Ingresar"}),(0,t.jsxs)("div",{className:"relative my-6",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-zinc-800"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"px-2 bg-zinc-950 text-gray-400",children:"O continuar con"})})]}),(0,t.jsxs)("button",{type:"button",onClick:z,className:"w-full py-3 px-4 bg-zinc-900 hover:bg-zinc-800 border border-zinc-800 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-3",children:[(0,t.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})]}),(0,t.jsx)("div",{className:"mt-8 text-center border-t border-white/5 pt-6 relative z-10",children:(0,t.jsx)("button",{onClick:()=>{l(!n),p("")},className:"text-sm text-gray-400 hover:text-white transition-colors font-medium",children:n?"¿Ya tienes cuenta? Inicia sesión":"¿No tienes cuenta? Regístrate aquí"})})]}),v&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-zinc-900 p-6 rounded-xl border border-zinc-800 w-full max-w-md",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Casi listo"}),(0,t.jsx)("p",{className:"text-gray-400 mb-6",children:"Para terminar, necesitamos el nombre de tu emprendimiento."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre del emprendimiento"}),(0,t.jsx)("input",{type:"text",value:y,onChange:e=>N(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-zinc-950 border border-zinc-800 text-white placeholder-zinc-600 focus:outline-none focus:ring-2 focus:ring-white/20 focus:border-transparent",placeholder:"Ej: Mi Estética"})]}),(0,t.jsx)("button",{onClick:C,disabled:!y.trim()||b,className:"w-full py-3 px-4 bg-white hover:bg-zinc-200 text-black font-medium rounded-lg transition-colors disabled:opacity-50",children:b?"Guardando...":"Comenzar"})]})]})})]})}e.s(["default",()=>n])},94542,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(37899),a=e.i(32341),i=e.i(18566);function n(){let{user:e}=(0,a.useAuth)(),n=(0,i.useRouter)();return((0,s.useEffect)(()=>{e&&n.push("/")},[e,n]),e)?null:(0,t.jsx)(r.default,{})}e.s(["default",()=>n])}]);